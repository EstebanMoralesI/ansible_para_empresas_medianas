---
- name: RESETEAR PUERTOS ROUTER
  hosts: router
  gather_facts: no
  tasks:
    - ios_config:
        lines:
          - interface {{ item.puerto_id }}          
          - no ip address 
          - shutdown      
      loop: "{{ puertos_parametros }}"

- name: RESETEAR PUERTOS SWITCH
  hosts: switch
  gather_facts: no
  tasks:     
    - ios_config:
        lines:
          - interface {{ item.puerto_id }}          
          - no ip address
          - switchport 
          - shutdown      
      loop: "{{ puertos_parametros }}"

- name: RESETEAR PARAMETROS DE ROUTER/SWITCH
  hosts: all
  gather_facts: no
  tasks:    
    - name: RESETEAR OSPF
      ios_config:
        lines:                    
          - no router ospf 1  
    - name: RESETEAR USUARIOS 
      ios_user:
        aggregate:
        - name: esteban
        purge: yes
    - name: REMOVER BANNER
      ios_banner:
        banner: motd
        state: absent

- name: RESETEAR ETHERCHANNEL CAPA 3
  hosts: equipos-etherchannel-capa3
  gather_facts: no
  tasks:  
    - ios_config:
        lines:
          - interface range {{ item.etherchannel_range }}
          - no channel-group {{ item.etherchannel_numero }} mode active
          - switchport
          - shutdown
      loop: "{{ etherchannel_capa3_parametros }}"
    - ios_config:
        lines:
          - no interface port-channel {{ item.etherchannel_numero }}
      loop: "{{ etherchannel_capa3_parametros }}" 

- name: RESETEAR ETHERCHANNEL CAPA 2
  hosts: equipos-etherchannel-capa2
  gather_facts: no
  tasks:  
    - ios_config:
        lines:
          - interface range {{ item.etherchannel_range }}
          - no channel-group {{ item.etherchannel_numero }} mode active
        #  - switchport
          - shutdown
      loop: "{{ etherchannel_capa2_parametros }}"
    - ios_config:
        lines:
          - no interface port-channel {{ item.etherchannel_numero }}
      loop: "{{ etherchannel_capa2_parametros }}" 

- name: RESETEAR VLANS 
  hosts: equipos-vlan
  gather_facts: no
  tasks:  
    - ios_config:
        lines:
          - no vlan "{{ item.vlan_id }}"     
      loop: "{{ vlans }}"
